<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Forgot Password - Chuyzzz</title>

  <!-- CSS -->
  <link rel="stylesheet" href="assets/css/forgotpass.css" />

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

  <!-- Font Awesome (same as Login) -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>

<body class="night-bg">

  <main class="auth-layout">

    <div class="auth-card">

      <h2 class="auth-title">Reset Password</h2>

      <!-- Email -->
      <div class="input-group">
        <input id="fp-email" type="email" placeholder="Enter your email" />
      </div>

      <!-- New Password -->
      <div class="input-group password-group">
        <input id="fp-password" type="password" placeholder="New Password" />
        <i class="fa-solid fa-eye toggle-pass" data-target="fp-password"></i>
      </div>

      <!-- Confirm Password -->
      <div class="input-group password-group">
        <input id="fp-password2" type="password" placeholder="Confirm New Password" />
        <i class="fa-solid fa-eye toggle-pass" data-target="fp-password2"></i>
      </div>

      <!-- Reset Button -->
      <button id="reset-btn" class="btn big">Reset Password</button>

      <p class="auth-links">
        <a href="login.html">Back to Login</a>
      </p>

    </div>

  </main>

  <!-- JS -->
  <script>
    // Password toggle (same logic as Login)
    document.querySelectorAll('.toggle-pass').forEach(icon => {
      icon.addEventListener('click', () => {
        const input = document.getElementById(icon.dataset.target);

        if (input.type === 'password') {
          input.type = 'text';
          icon.classList.replace('fa-eye', 'fa-eye-slash');
        } else {
          input.type = 'password';
          icon.classList.replace('fa-eye-slash', 'fa-eye');
        }
      });
    });

    // Basic reset logic (optional but safe)
    document.getElementById('reset-btn').addEventListener('click', () => {
      const email = document.getElementById('fp-email').value.trim();
      const pass1 = document.getElementById('fp-password').value.trim();
      const pass2 = document.getElementById('fp-password2').value.trim();

      if (!email || !pass1 || !pass2) {
        alert("Please fill all fields!");
        return;
      }

      if (pass1 !== pass2) {
        alert("Passwords do not match!");
        return;
      }

      const users = JSON.parse(localStorage.getItem('users') || '[]');
      const userIndex = users.findIndex(u => u.email === email);

      if (userIndex === -1) {
        alert("Email not found!");
        return;
      }

      users[userIndex].password = pass1;
      localStorage.setItem('users', JSON.stringify(users));

      alert("Password successfully reset!");
      window.location.href = "login.html";
    });
  </script>

</body>
</html>
